11-6补全了xml数据库，还有更改了很大的程序xml数据库连接，还有相机的xml没有加。
11-7今天更改了大量的程序代码，把xiangji的数据也加上了，只不过release版本出问题，换成了debug版本。而且debug版本出现了大量的错误。修改完成
11-13尝试了利用XML文件进行多语言切换，效果不错
11-20这几天删除了很多编辑按钮，加密在i+8时效果不错，但不能保证完全不出错。更改了用户设定页面，终于能够显示当前选择方案了！在Mod设定上进行了修改，理解了到底是什么用处！


2017-12-29
1、	首先删除了 继续试用和注册 界面。
2、	删除了 调试专用 界面的无用按钮，删除了区域、灰度、深度界面的无用按钮，简化程序
3、	整合了颜色敏感界面，把区域、灰度、深度、背景阈值的界面放在其中
4、	增加了数值读取界面
5、	写了英文软键盘界面
6、	使 调试专用 和 模式选择 界面的编辑框可以在电阻屏上使用
7、	写了开始打、停止打按钮和相应的指示灯，配合MFCApplication1主界面的ontimer使用，做到了每个界面指示灯和按钮颜色都同步的功能
8、	写了关机关闭电脑电源的功能，重启也可以重启电脑
9、	修改了背景板错误，因为datatestascii[200]数组太小了，我改成了500.
10、	写了 延迟到期 界面，在主界面还可以判断是否更改了系统时间。
11、	修改了mod界面，使其能够自适应屏幕
12、	写了初始化恢复出厂设置

出现的问题：
1、开机自启动一直失败，程序自动崩溃！
2、ontimer一直执行，在切换功能界面时也会一直执行，只有kill才会终止。





2018-1-5

1、	修改了ontimer的算法，把开始打停止打功能按钮与其他界面开始打停止打按钮做区分，因为两者功能不一样。
2、	修改了开始打停止打按钮的功能，上一次理解错误，然后更改了开始打停止打按钮的颜色
3、	修改了灰度忽略和面积微调界面，增加了加减功能
4、	修改了程序下发时350颜色敏感强度没有下发的错误
5、	重置了区域分量、深度分量、灰度分量
6、	修改了垂直居中
7、	开机自启动正在测试中，关于关机后台一时半会没法退出情况，将利用电脑关机解决
8、	解密系统将后续解决

2018-1-8

1、修改了错误判断，知道了ASCII协议错误返回的问题，更改了rsp数组的判断

2018-1-9
1、今天最大的收获莫过于发现如何最简单的开机自启动了！打开路径"C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup"然后把程序的快捷方式考进去就可以实现完美的开机自启动了，比用代码方便而且正确，代码不可取！

2018-1-10

1、今天修改了面积界面的上下限错误和“-”号错误。
2、着重解决Realse版本为什么会出现变量错误值问题，在2018-1-10 RD文件中删除了所有的UPdateData(TRUE)；初步修正了Realse版本的错误，因为无法检查此项改动对整个程序的影响，所以单独创建一个版本进行区分，以后两个版本一起修改！
3、删除了R、G、B界面的点击切面切换按钮！

2018-1-12

1、修改了型选界面的错误，相机划分的错误，背景板的错误。

2018-1-14
1、修改了模式选择进入界面，把所有相机的第一位置置0.
2、修改了解密方式。
 
 2018-1-22版出了问题，按钮不能连接后台代码！

用1-14版本进行重写

2018-3-4
1、删除很多宏实界面的多余内容比如开关、比如界面转换按钮。
2、修改Socket中char数组为byte数组，因为char数组最大只是127，不能大于127

2018-3-5
1、构思一下两个byte转一个整数的问题，想了两种方法去拼装数据帧，一种是用allData[][]二维数组赋值，但是存在与底层数据可能不一致的情况。第二种是直接用setfunc函数去读色选机数据大约要读80次，在电脑上模拟需要一秒，在实际中就不知道需要多长时间了！我尝试着去改变每一次读取的最大值，结果并不行，因为每次从色选机读取最大值是260，四个uint8转化为一个uint16数值，所以最大也就60个值，我选择用每次读取50个。

2、修改了密码解密方式，判断了输入时间是否有无问题，因为一旦时间出问题，程序会直接崩溃，没办法进行更改。所以必须保证解密的时候，密码输入是正确的！

2018-3-6
1、修改了模式选择三界面中的错误，修改了modbus中timeout，尝试着用最快的超时，完成轮询。
2、明天把模式选择删除几个按钮。

2018-3-8
1、修改了所有界面的字体大小，全部都修改成了小四。
2、底层发下函数使用的rtu的下发函数组装的ASCII码协议帧。
3、每次只能读取50个地址，因为modbus读取有限制。

2018-3-12
1、修改了多语言代码
2、修改了多语言的XML文件。

2018-3-13
1、补上了没有多语言的界面并更正XML文件。

2018-3-15
2、14号的工作全部是错误的，所以14号的删除。关于添加背景图片会造成static文本背景为白色，很难看。海事局顶用she皮肤作为底色，可以使用picture control进行贴图。
3、合并很多xml文件，减少读取xml的工作量，定时器不再进行xml读取工作。
4、改写了主界面的时间显示和色选方案显示。

2018-3-17

1、更改了读取XML文件代码，减少变量类型转换，减少时间。经测试，初始化时花费在XML文件读取需要650ms，而下发则需要2000ms。下发已经改写到最大值了，所有这段时间无法缩短。共下发77次读写命令。

2018-3-18

1、测试使用100ms的timeout可能会导致返回通信异常，这个数值只能改变通信异常时返回速度，对于通信正常时发送时间没有关系。所以改成500ms进行测试。如果在机器上不行，在进行修改。
2、数据库保存测试中。进行数据库的增删改查工作。

2018-3-19
1、进行远程通信测试，接收情况良好，使用SQL Server也可以保存数据
2、现在程序数据上传，数据安排整理的不合理，明天更改。
3、SQL语句还需大量学习。

2018-3-20
1、今天主要考虑上传和下发功能，上传时传输的是色选机主控板和相机的数据，但是如果从网页端直接控制色选机会造成没办法更改人机界面。色选机上传的是真实数据，如果是下发的命令，经过与王新龙讨论考虑，我们认为可以通过控制lasttime.XML文件控制色选机，因为色选机人机界面和控制系统是多对多的关系，从服务器直接控制lasttime.xml文件可以控制人机交互界面所有操作，人机界面数据更改开机可以更改相机数据。但是还需要保存可以直接控制色选机的功能，就是可以服务器直接向相机发数据不更改人机界面数据，因为有的数据在人机界面没有存储。还要尝试发送lasttime.xml文件，同时也可以单个控制人机界面某个单元的下发命令。

2018-3-21
1、找到如何把1变成01.
2、更改了服务器通信软件界面，并添加传送文件功能，写了文件读写保存功能。
3、写了HONS界面的接收文件功能进行了多次失败测试后，终于可以把服务器端发送的文件成功解析到本地。

2018-3-22
1、在尝试由人机界面发送文件到服务器时，发现服务器界面的接受长度计算最大只能到32698，因为Toint16函数Int16在-32768 到 +32767之间。当最高位为1时规定为负数。这是计算机原有规定。所以直接用高字节*256+低字节搞定。
2、发送文件，接收文件没问题。
3、功能码测试！
4、主板数据库存储完成。现在主要是不清楚主要是实现什么，但是我把基本功能都写了，到时候可以根据需要修改。
5、我觉得第一次连接成功后可以把网管信息与ip地址进行绑定.

2018-3-28
1、UpDateData(True);在需要把前端数据更改后的传到后端时是不能忽略的，比如在连接服务器的界面的就不能删除，但是功能界面的为什么能删除呢！，因为在窗体初始化的时候是赋值的相应的全局变量，就算没有UpDateData(True);也可以根据初始值相加减得到正确的值。
2、局域网测试传输文件终于正常了！
3、使用数据库把设备ID和文件路径相联系。做到一个色选机对应一个路径！
2018-4-3
1、堆和栈的分配空间是不一样的，腿的空间没有限制，栈的空间默认是1M我在yuancheng界面分配了两个600KB的空间就会报错，因为栈没有分配那么多。
2、张冠李戴，原先是用了CSocket进行通信，但是CSocket不能在多线程中使用。这样recv函数不阻塞的原因也找到了，因为recv和CSocket不是配和使用的，再加上CSocket不能多线程的原因。我又重新创建了clientScoket实现阻塞接收数据。多谢王新龙帮我找到错误。
